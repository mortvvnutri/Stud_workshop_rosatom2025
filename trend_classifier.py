import numpy as np
import yfinance as yf

def classify_trend(ticker):
    """–ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Ç—Ä–µ–Ω–¥ (–±—ã—á–∏–π/–º–µ–¥–≤–µ–∂–∏–π) –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 60 –¥–Ω–µ–π –∏–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö."""
    data = yf.download(ticker, period="6mo")['Close']
    if data.empty:
        return "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç—Ä–µ–Ω–¥–∞."
    
    # –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–Ω—å—à–µ 60, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–µ—Å—å –¥–æ—Å—Ç—É–ø–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω
    recent_data = data if len(data) < 60 else data[-60:]
    
    X = np.arange(len(recent_data)).reshape(-1, 1)
    y = recent_data.values.reshape(-1, 1)

    # –í—ã—á–∏—Å–ª—è–µ–º –Ω–∞–∫–ª–æ–Ω —Ç—Ä–µ–Ω–¥–∞
    slope = np.polyfit(X.flatten(), y.flatten(), 1)[0]

    # –ü–æ—Ä–æ–≥ –¥–ª—è –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞ (–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å)
    if abs(slope) < 1e-6:
        return "–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥"
    elif slope > 0:
        return "üìà –ë—ã—á–∏–π —Ä—ã–Ω–æ–∫ (–≤–æ—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥)"
    else:
        return "üìâ –ú–µ–¥–≤–µ–∂–∏–π —Ä—ã–Ω–æ–∫ (–Ω–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥)"
